<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>{{{ PRODUCT_NAME }}}</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="manifest" href="manifest.webmanifest">
    <script src="https://unpkg.com/@vkid/sdk@2.3.3/dist-sdk/umd/index.js"></script>
  </head>
  <body>
    <div id="unity-container">
      <canvas id="unity-canvas" width={{{ WIDTH }}} height={{{ HEIGHT }}} tabindex="-1"></canvas>
      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div>
        <script src="https://unpkg.com/@vkid/sdk@2.3.3/dist-sdk/umd/index.js"></script> 
        <script type="text/javascript"> 
          if ('VKIDSDK' in window) { 
            const VKID = window.VKIDSDK; 
      
            VKID.Config.init({ 
              app: 52387924, 
              redirectUrl: 'https://cityofsinners.ru/index.html', 
              responseMode: VKID.ConfigResponseMode.Callback, 
              source: VKID.ConfigSource.LOWCODE, 
            }); 
      
            const oneTap = new VKID.OneTap(); 
      
            oneTap.render({ 
              container: document.currentScript.parentElement, 
              showAlternativeLogin: true, 
              oauthList: [ 
                'ok_ru', 
                'mail_ru' 
              ] 
            }) 
            .on(VKID.WidgetEvents.ERROR, vkidOnError) 
            .on(VKID.OneTapInternalEvents.LOGIN_SUCCESS, function (payload) { 
              const code = payload.code; 
              const deviceId = payload.device_id; 
      
              VKID.Auth.exchangeCode(code, deviceId) 
                .then(vkidOnSuccess) 
                .catch(vkidOnError); 
            }); 
          } 
          
          function vkidOnSuccess(data) { 
            console.log(`LogIn Success ${data}`);
          }
        
          function vkidOnError(error) { 
            console.log(`LogIn error: ${error}`);
          } 
        </script> 
      </div>
      <div id="unity-warning"> </div>
    </div>
    <script src="index.js"></script>
  </body>
</html>
